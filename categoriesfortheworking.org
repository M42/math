#+TITLE: Categories for the working mathematician
#+DESCRIPTION: Exercises on the Saunders MacLane's book

#+SETUPFILE: config.setup
#+SETUPFILE: essay.setup
#+LATEX_HEADER: \usepackage{color}
#+LANGUAGE: en
#+OPTIONS: toc:nil
#+TODO: TODO WIP | CHECK DONE

* I. Categories, Functors and Natural Transformations
** I.1. Axioms for categories
*** Metagraph
A *metagraph* consists of objects $a,b,c,\dots$ and arrows $f,g,h,\dots$, with two 
operations:

  - *domain*, $dom(f) = a$, and
  - *codomain*, $cod(f) = b$,

that we write as $f : a \to b$.

*** Metacategory
A *metacategory* is a metagraph with two additional operations:

  - *Identity*: $id_a : a \to a$
  - *Composition*: for a pair of arrows $dom(g) = cod(f)$, it defines a
    new arrow $g \circ f : dom(f) \to cod(g)$.

    \[\begin{tikzcd}
    & b \drar{g} & \\
    a \arrow{rr}{g\circ f} \urar{f} & & c
    \end{tikzcd}\]

Subject to the following axioms:

  - *Associativity*: Given objects and arrows in this configuration:
    
    $a \overset{f}\to b \overset{g}\to c \overset{k}\to d$

    We have the equality: $k \circ (g \circ f) = (k \circ g) \circ f$.

  - *Unit law*: composition with the identity arrow is neutral.

**** Metacategory of Sets
**** Metacategory of Groups
**** Arrow-only axioms
** I.2. Categories
*** Category
An interpretation of a metacategory within set theory.

**** Diagram scheme (directed graphs)
A category is a graph with identity and composition functions.

*** Examples of categories
**** Basic examples
***** The empty category
***** 1, the category with one object and one identity
***** 2, the category a -> b with two objects
***** 3, a triangle category
***** Parallel arrows

**** Discrete categories
Where every arrow is an identity.

**** Monoids and groups
A category with one object.

**** Matrices
Objects: positive integers.
Arrows: $m\times n$ matrices.

**** Sets of sets
**** Preorder
***** Partial orders
***** Linear orders
**** Ordinal numbers
**** Simplicial category
**** Large categories
** I.3. Functors
*** Functor
A morphism of categories. A functor $T : {\cal C} \to {\cal B}$ is given by:

  - The *object function*, $T : Obj({\cal C}) \to Obj({\cal B})$.
  - The *arrow function*, $T : (c \to c') \to (Tc \to Tc')$

With the axioms:

  - $T(1_c) = 1_{Tc}$
  - $T(f\circ g) = Tg \circ Tf$

*** Examples
**** The powerset functor
**** Homology groups
**** General linear group
**** Commutators
**** Forgetful functors
*** Composition of functors, the metacategory Cat
We can define composition of functors, and also functors as isomorphisms.

**** Isomorphisms
A functor is an isomorphism iff there is a functor $S : B \to C$ for 
which both composites are the identity $S \circ T = Id = T \circ S$.

**** Full functor
Every $g : c \to c'$ of $B$ is of the form $Tf : Tc \to Tc'$. In other words,
the arrow function (the map!) is injective.

**** Faithful functor
The equality $Tf_1 = Tf_2$ implies $f_1 = f_2$. In other words, the arrow
function is surjective.

**** Subcategories
A subcategory gives us an inclusion functor.

** I.4. Natural transformations
*** Natural transformation
Given two functors $S,T : C \to B$, a natural transformation $\tau : S \xrightarrow{.} T$
is a function assigning every $c \in C$ an arrow $Sc \to Tc$ and yielding
a commutative diagram:

\[\begin{tikzcd}
c \dar{f} & & Sc \rar{\tau_c}\dar{Sf} & Tc \dar{Tf} \\
c' & & Sc' \rar{\tau_{c'}} & Tc'
\end{tikzcd}\]

We say that $\tau_c$ is natural in $c$.

**** Translation of pictures
A natural transformation translates a diagram from $S$ to $T$.

\[\begin{tikzcd}
a \arrow{dd}{h}\drar{f} &   & & S a \arrow{dd}{S h}\drar{S f} \arrow{rrr}{\tau a} &     & & T a \arrow{dd}{T h}\drar{T f} &     \\
  & b \dlar{g} & &     & S b \dlar{S g} \arrow{rrr}{\tau b} & &     & T b \dlar{T g} \\
c &   & & S c \arrow{rrr}{\tau c} &     & & T c &     \\
\end{tikzcd}\]

*** Natural isomorphisms
A natural transformation is a morphism of functors. We call 
*natural isomorphism* to a natural transformation where every 
component $\tau_c$ is invertible. We write it as:

$\tau : S \cong T$

The inverses form another natural transformation.

*** Examples
**** Determinant
Natural transformation between two functors
$GL, {\cal U}() : \mathtt{CRng} \longrightarrow \mathtt{Grp}$.

**** Identity and factor-commutator functor

**** Double character group
Defined as $D(G) = Hom(G, \mathbb{R}/\mathbb{Z})$, it is a contravariant functor when 
we define $(Df) t = t \circ f$. But the twice iterated functor $D^2$ is a 
covariant one.

There is a natural transformation between $Id$ and $D^2$.

\[
\tau_G(g) t = t(g)
\]

It is easy (with lambda calculus, for example) to check that this
diagram commutes.

**** Double dual of a finite vectorial space

**** Inclusion and cardinality of ordinals

** I.5. Monics, epis and zeros
*** Isomorphism
An arrow $e : a \to b$ is an isomorphism if there is an arrow $e^{-1} : b \to a$
such that $e'e = 1$ and $ee' = 1$.

**** Isomorphic objects
Two objects are isomorphic if there is an isomorphism between them.

*** Monic and epi
An arrow is *monic* if it is left cancellable, it is *epi* if it is
right cancellable.

**** Retractions and sections
A left inverse is called a *retraction*, while a right inverse is
called a *section*.

*** Splits and idempotents
When $gh = 1$, $g$ is a split epi, $h$ is a split monic and the composite
$hg$ is an idempotent. An arrow is *idempotent* if $f^2 = f$, and it is said
to split when there exist arrows $g$ and $h$ such that $f = hg$ and $gh = 1$.

*** Terminal objects and initial objects
An object $t$ is terminal if for every $a$ there is exactly one arrow $a \to t$.
An object $s$ is initial if for every $a$ there is exactly one arrow $s \to a$.
An object $z$ is null if it is both initial and terminal.

**** Zero arrow
There is an unique arrow $a \to z \to b$ called the *zero* arrow. Any 
composite with it is itself a zero arrow.

*** Groupoids
A category where every arrow is invertible.

**** The fundamental groupoid
**** Group of homomorphisms
In a groupoid, each object determines a group, $hom(x,x)$.
If there is an arrow $f : x \to x'$, the groups $hom(x,x)$ and $hom(x',x')$
are isomorphic under conjugation $g \mapsto fgf^{-1}$.

**** Connected groupoid
A *connected groupoid* is deteremined by a group and the set of
all objects.

** I.6. Foundations
*** Universe
An universe is a set $U$ with the closure properties:

  1. $x \in u \in U \implies x \in U$.
  2. e$u,v \in U \implies \{u,v\},(u,v),u\times v \in U$.
  3. $x \in U \implies {\cal P}x, \cup x \in U$.
  4. $\omega \in U$ where $\omega = \{0,1,2,\dots\}$.
  5. $f : a \to b$ surjective and $a \in U$, $b \subseteq U$ implies $b \in U$.

*** Small sets
Fixed an universe, we call a set $u \in U$ a *small set*. The universe is
the set of all small sets. $\mathtt{Set}$ denotes the category of small sets.

**** Small structures
A small group is a small set with a group structure. $\mathtt{Grp}$ denotes the
category of small groups.

*** Small categories
A category is small if the set of its arrows and objects are both small
sets. $\mathtt{Set}$ is not a small category.

** I.7. Large categories
*** Abelian groups
*** Rings
*** Modules over a ring
*** Bimodules
*** Topological spaces with continuous maps
*** Topological spaces with homotopy classes
*** Pointed sets
*** Binary relations
*** Concrete categories
** I.8. Hom-Sets
*** Hom-set
For objects $a,b \in C$, the *hom-set* is the set of all arrows between them:

\[
hom(a,b) = \{ f \mid f : a \to b \}
\]

**** Redefinition of a category
A small category is given by:

  1. Set of objects $a,b,\dots$
  2. Hom-set between two objects $hom(a,b)$
  3. Composition function $hom(b,c)\times hom(a,b) \to hom(a,c)$
  4. Identity function for every object, $id \in hom(a,a)$

The distributivity can be seen as commutativity of the following
diagram:

\[\begin{tikzcd}
hom(c,d)\times hom(b,c)\times hom(a,b) \rar\dar &
hom(b,d)\times hom(a,b) \dar \\
hom(c,d)\times hom(a,c) \rar &
hom(a,d)
\end{tikzcd}\]

*** Preadditive category
A category $A$ where each hom-set $hom(a,b)$ is an additive abelian group
for which composition is bilinear:

\[
(g+g')\circ(f+f') = g\circ f + g\circ f' + g' \circ f + g' \circ f'
\]

*** Preadditive category as an enriched category
A preadditive category is given by:

  1. Set of objects $a,b,\dots$
  2. Hom-set, an abelian group between two objects $hom(a,b)$
  3. A bilinear composition $hom(b,c) \otimes hom(a,b) \to hom(a,c)$
  4. Identity morphism for every object, $\mathbb{Z} \to hom(a,a)$

We can see the similitude with the definition of a category by hom-sets.
Categories created in this way are called *enriched categories*.

* II. Constructions on categories
** II.1. Duality
*** Elementary theory of an abstract category (ETAC)
A theory with statements involving:

  - Domains: $a = dom(f)$
  - Codomains: $b = codom(f)$
  - Composition: $h = g \circ f$

A *sentence* is a statement with all variables quantified, using
the logical connectives and quantifiers.

**** Dual of an statement
A dual is formed by making the following replacements:

  - $a = dom(f)$ changes to $a = codom(f)$
  - $h = g \circ f$ changes to $h = f \circ g$
  - Logic is unchanged.

**** Table of dualities
\begin{tabular}{l|r}
Statement & Dual statement \\
\hline
$f : a \to b$ & $f : b \to a$ \\
$a = \operatorname{dom} f$ & $a = \operatorname{cod} f$ \\
$h = g \circ f$ & $h = f \circ g$ \\
$f$ mono & $f$ epi
\end{tabular}

*** Duality principle
The dual of each of the axioms for a category is also an axiom. Therefore,
if $\Sigma$ is a consequence of the axioms, so is its dual statement.

*** Duality and functors
The elementary theory of one functor has the axioms of two categories
$A,B$, and the properties of a functor $T$ between them. The duality for
a statement involving several categories reverses the arrows in each
category, but does not reverse the functors.

** II.2. Contravariance and opposites
*** Opposite category
The *opposite category*, $C^{op}$, is defined with the objects of $C$; for each 
arrow $f : a \to b$ of $C$, the corresponding $f^{op} : b \to a$ is defined with the 
composition

\[
f^{op} \circ g^{op} = (g\circ f)^{op}.
\]

**** Opposite functors
If $T : C \to B$ is a functor, we can create an opposite functor
$T^{op} : C^{op} \to B^{op}$. The assignment $C \to C^{op}$ defines a covariant functor
$\mathtt{Cat} \to \mathtt{Cat}$.

*** Contravariant functors
A functor $S : C^{op} \to B$ can be seen as a *contravariant* functor $S : C \to B$,
knowing that

\[
S(f^{op}\circ g^{op}) = (Sf^{op})(Sg^{op}) = S((g\circ f)^{op}).
\]

**** Examples: Hom-sets
For each object $a \in C$, the *contravariant hom-functor* $hom(a,-)$ and
the *covariant hom-functor* $hom(-,a)$ are defined.

**** Examples: Sheafs
Given $X$, a topological space. Its open sets define a category by 
inclusion, $\mathtt{Open}(X)$. Let ${\cal C}(U)$ denote the set of continuous functions
$h : U \to \mathbb{R}$, the assignment $h \mapsto h|_V$ is a function ${\cal C}(U)\to{\cal C}(V)$ for
each $V \subset U$; and this gives us a contravariant functor.

**** Examples: R-Modules
$\mathtt{ModR} : \mathtt{Rng} \to \mathtt{Cat}$ is a contravariant functor. If $\rho : R \longrightarrow S$ is a morphism
of rings, given $B$ an S-module, we can define $(Mod\rho) B = B\rho$ by pull-back.

** II.3. Products of categories
*** Product of two categories
We define the *product* $B \times C$ as the category with:

  - pairs of objects $(b,c)$ as objects,
  - pairs of arrows $(f,g)$ as arrows,

with the composition given by the composites in $B$ and $C$

\[
(f',g') \circ (f,g) = (f' \circ f,g' \circ g).
\]

We can define projection functors $P : B\times C \to B$, $Q : B\times C \to C$. Given
any category $D$ and two functors $B \overset{R}\longleftarrow D \overset{T}\longrightarrow C$, there is an unique 
functor $F : D \to B\times C$ with $PF = R, QF = T$.

\[\begin{tikzcd}
& D \drar{T}\dlar[swap]{R} \dar[dashed]{\exists! F} & \\
B & B\times C \rar[swap]{Q}\lar{P} & C
\end{tikzcd}\]

*** Product of functors
Two functors $U : B \to B'$, $V : C\to C'$ have a product:

\[
U\times V : B\times C \to B'\times C'
\]

That can be described as the unique functor making the following
diagram commutative:

\[\begin{tikzcd}
B \dar{U} &
B \times C  \rar{Q}\lar[swap]{P} \dar[dashed]{U \times V}&
C \dar{V} \\
B' &
B' \times C' \rar[swap]{Q'}\lar{P'}&
C'
\end{tikzcd}\]

**** Product as a functor
The product of categories can be seen as a functor:

\[
\times : \mathtt{Cat} \times \mathtt{Cat} \to \mathtt{Cat}
\]

**** Bifunctors
Our definition of product category gives an automatic definition for
a *bifunctor*, a functor of two variables.

*** Bifunctor determined by its currifications
Let $B,C,D$ be categories. For all objects $c \in C, b \in B$, let $L_c : B \to D$
and $M_b : C \to D$ be functors such that $M_b(c) = L_c(b)$.

There exists a bifuctor $S : B\times C \to D$ such that $S(-,c) = L_c$
and $S(b,-) = M_b$ iff for every pair of arrows:

\[
M_{b'}g \circ L_c f = L_{c'}f \circ M_b g
\]

so we can define the value of $S(f,g)$ uniquely.

**** TODO Proof

*** Natural transformations between bifunctors
Given bifunctors $S,S'$, the function $\alpha$ is a natural transformation
$\alpha : S \Rightarrow S'$ iff $\alpha(b,c)$ is natural in $b$ and natural in $c$.

**** TODO Proof

** II.4. Functor categories
*** Composition of natural transformations
Given functors $R,S,T : C \to B$ and natural transformations $\tau : S\to T$
and $\sigma : R \to S$, their compositions define composite arrows which are
the components of the composite natural transformation $\tau \cdot \sigma$.

\[\begin{tikzcd}
Rc \rar{Rf}\dar{\sigma_c}\arrow[dd,bend right=90]{(\tau \circ \sigma)_c} &
Rc' \dar{\sigma_{c'}} \arrow[dd,bend left=90]{(\tau\circ\sigma)_{c'}} \\
Sc \rar{Sf}\dar{\tau_c}  &
Sc' \dar{\tau_{c'}} \\
Tc \rar{Tf}  &  Tc' 
\end{tikzcd}\]

**** Proof
Naturality of the external square follows from the commutativity of the
two internal squares.

*** Functor category
Given categories $B,C$, let $B^C = \mathrm{Funct}(C,B)$ be the *functor category*,
with objects the functors $T\colon C \to B$ and morphisms the natural 
transformations

\[ \mathrm{Nat}(S,T) = \left\{ \tau\mid \tau\colon S \dot\to T \right\}.
\]

**** Example: Category of arrows
The category $\mathrm{Funct}(B,2)$ is called the *category of arrows* of $B$. Its
objects are arrows $f\colon a \to b$ and its morphisms are commutative squares

\[\begin{tikzcd}
a\rar{h} \dar[swap]{f} & a' \dar{f'} \\
b\rar{k} & b'
\end{tikzcd}\]

**** Example: Actions on a set
If $M$ is a monoid, $\mathrm{Funct}(M, \mathtt{Set})$ is the category with objects the actions
of $M$ on some sets and arrows the morphisms of such actions.

**** TODO Example: Group with operators
*** Example: Group representations
Given $K$ a commutative ring, the functor category $\mathrm{Funct}(G, K\mathtt{-mod})$ is the 
category of linear representations of $G$.

**** Objects
Every functor $T \colon G \to K\mathtt{-mod}$ is determined by a $K\text{-module}$ $V$ and
a morphism of groups $T\colon G \to \text{Aut}(V)$.

**** Natural transformations
A natural transformation $\sigma\colon T \to S$ is given by a single module
homomorphism $\sigma\colon V \to V'$, such that

\[\begin{tikzcd}
V\rar{\sigma} \dar[swap]{Tg} & V' \dar{T'g} \\
V\rar{\sigma} & V'
\end{tikzcd}\]

and it is called an *intertwining* operator.

** II.5. The category of all categories
*** Identity natural transformations
The identity functor is the identity for the horizontal and vertical
compositions. We can use the symbol of the functor to denote it like
$S \colon S \dot\to S$.

*** Horizontal composition of natural transformations
Given functors $S,T \colon C \to B$ and $S',T'\colon B \to A$ and natural transformations

\[\begin{tikzcd}
C 
\rar[shift left=7pt, ""{name=UL, below}]{S} 
\rar[shift right=7pt, ""name=LL][swap]{T\vphantom{'}} &
B 
\rar[shift left=7pt, ""{name=UR, below}]{S'}
\rar[shift right=7pt, ""name=LR][swap]{T'} &
A\\
\ar[from=UL, to=LL, "\tau", shorten <= -2pt, shorten >= -2pt]
\ar[from=UR, to=LR, "\tau\smash{'}", shorten <= -2pt, shorten >= -2pt]
\end{tikzcd}\]

we can define the *horizontal composite* $\tau' \circ \tau \colon S'S \to T'T$ as the diagonal
of the commutative square

\[\begin{tikzcd}
S'Sc\rar{\tau'_{Sc}} \dar[swap]{S'\tau_c} & T'Sc \dar{T' \tau_c} \\
S'Tc\rar{\tau'_{Tc}} & T'Tc
\end{tikzcd}\]

explicitly, as $\tau' \circ \tau = T' \tau \circ \tau' = \tau' \circ S'\tau$. It is a natural transformation.

**** Alternative notation
With identity notation, we can then define the horizontal composition
as

\[
\tau'\circ \tau = 
(T' \circ \tau) \cdot (\tau'\circ S) =
(\tau' \circ T) \cdot (S'\circ \tau).
\]

**** Proof
It is natural as the following diagram is the composition of two
naturality squares

\[\begin{tikzcd}
S'Sc \rar{S'\tau} \dar{S'Sf} &
S'Tc \rar{\tau'}  \dar{S'Tf} &
T'Tc \dar{T'Tf} \\
S'Sb \rar{S'\tau} &
S'Tb \rar{\tau'} &
T'Tb
\end{tikzcd}\]

defined respectively by the naturality of $S'\tau$ and $\tau'$.

*** Interchange law
Given three categories and four transformations

\[\begin{tikzcd}
C 
\rar[shift left=15pt, ""{name=UL, below}]{} 
\rar[""name=L]
\rar[shift right=15pt, ""name=LL][swap]{} &
B 
\rar[shift left=15pt, ""{name=UR, below}]{}
\rar[""name=R]
\rar[shift right=15pt, ""name=LR][swap]{} &
A\\
\ar[from=UL, to=L, "\sigma", shorten <= -2pt, shorten >= -2pt]
\ar[from=L, to=LL, "\tau", shorten <= 2pt, shorten >= -2pt]
\ar[from=UR, to=R, "\sigma\smash{'}", shorten <= -2pt, shorten >= -2pt]
\ar[from=R, to=LR, "\tau\smash{'}", shorten <= 2pt, shorten >= -2pt]
\end{tikzcd}\]

the vertical and horizontal composites follow the interchange law

\[
(\tau'\cdot \sigma') \circ (\tau \cdot \sigma) = 
(\tau'\circ \tau) \cdot (\sigma'\circ \sigma).
\]

**** Proof
In this diagram, where every internal square is commutative by
naturality

\[\begin{tikzcd}
G_1F_1x \dar{G_1\sigma} \rar{\sigma'} \drar{\sigma'\circ\sigma} 
\ar[bend left]{rr}{\tau'\cdot\sigma'}
\ar[bend right=60,swap]{dd}{G_1(\tau \cdot \sigma)} & 
G_2F_1x \dar{G_2\sigma} \rar{\tau'} &
G_3F_1x \dar{G_3\sigma} \ar[bend left=60]{dd}{G_3(\tau \cdot \sigma)}\\
G_1F_2x \dar{G_1\tau} \rar{\sigma'} &
G_2F_2x \dar{G_2\tau} \rar{\tau'}  \drar{\tau'\circ\tau} &
G_3F_2x \dar{G_3\tau} \\
G_1F_3x \rar{\sigma'} \ar[bend right,swap]{rr}{\tau'\cdot\sigma'} &
G_2F_3x \rar{\tau'} &
G_3F_3x \\
\end{tikzcd}\]

we know, by definition, that the big diagonal must be $(\tau'\cdot \sigma') \circ (\tau\cdot\sigma)$.

*** Double category
A *double category* is a set of arrows for two different compositions
which together satisfy the [[*Interchange law][interchange law]].

*** 2-category
A *2-category* is a double category in thich every identity for the
first composition is also an identity for the second one.

**** Counterexample: commutative squares in Set
The category of commutative squares in Set is a double category but
not a 2-category.

*** Interchange law for operations
Two binary operations $\cdot,\circ$ are said to satisfy the interchange law when

\[
(a' \cdot b') \circ (a \cdot b) = (a' \circ a) \cdot (b'\circ b).
\]

**** Example: matrices
The usual product of matrices $\circ$ satisfies the interchange law with the
square-composition of matrices

\[
\tau \cdot \sigma = \begin{pmatrix}
\tau & 0\\
0 & \sigma
\end{pmatrix}.
\]

***** Proof
Trivial by definition.

*** Functor category as a functor
The functor category can be regarded as a functor

\[\mathrm{Func} \colon \mathtt{Cat}^{op}\times \mathtt{Cat} \to \mathtt{Cat}.
\]

sending an arrow, consisting of two functors $F,G$, to $F^{G}$, a functor
defined as

  * $F^GS = F \circ S \circ G$, on objects.
  * $F^{G}\tau = F \circ \tau \circ G$, on arrows.

**** Analogue with the hom-functor
Note that this is the categorical analogue of the hom-functor

\[\mathrm{Hom} \colon \mathtt{Set}^{op}\times \mathtt{Set} \to \mathtt{Set}.
\]

** II.6. Comma categories
*** Category of objects under an object
Given $b \in C$, the category of *objects under* it, $(b \downarrow C)$, is the category
with objects all pairs $(f\colon b \to c, c)$, and arrows $h\colon (f,c) \to (f',c')$ for those
arrows such that $h\circ f = f'$.

**** Displayed notation
Objects are of the form

\[\begin{tikzcd}
b \rar{f} & c
\end{tikzcd}\]

morphisms are of the form

\[\begin{tikzcd}
& c \arrow[dd, "h"] \\[-15pt]
b \urar{f}\drar[swap]{f'}& \\[-15pt]
& c'
\end{tikzcd}\]

and the composition is the composition of two commutative triangles
in that form.

*** Category of objects over an object
The category of *objects over* $a$, $(C \downarrow a)$ can be defined similarly in
displayed notation as objects of the form

\[\begin{tikzcd}
c \rar{f} & a
\end{tikzcd}\]

and morphisms

\[\begin{tikzcd}
c \arrow[dd, "h"] \drar{f} &  \\[-15pt]
& b \\[-15pt]
c' \urar[swap]{f'} &
\end{tikzcd}\]

*** Comma category
Given categories and functors $E \overset{T}\longrightarrow C \overset{S}\longleftarrow D$, the comma category
$(T\downarrow S)$ has objects

\[\begin{tikzcd}
Te \rar{f} & Sd
\end{tikzcd}\]

and arrows commutative squares

\[\begin{tikzcd}
Te\rar{Tk} \dar[swap]{f} & Te' \dar{f'} \\
Sd\rar{Sh} & Sd'
\end{tikzcd}\]

The composite is the yuxtaposition of squares.

**** Categories of objects under/over and object
Those are particular cases when the object is seen as a functor
from the unital category $b \colon 1 \to C$.

** II.7. Graphs and free categories
*** TODO Forgetful functor from categories to graphs
*** Free category
Let $G$ be a small graph. There is a small category $C$ called its free
category satisfying the following universal property

\[\begin{tikzcd}
G \rar{P} \drar[swap]{D} & UC\dar[dashed]{\exists! UD'} \\
& UB
\end{tikzcd}\]

which is equivalent to $P\colon G \to UC$ being initial in $(G \downarrow U)$.

** TODO II.8. Quotient categories
* III. Universals and Limits
** III.1. Universal arrows
*** Universal arrow
A *universal arrow* from $c$ to $S$ is an arrow $u \colon c \to Sr$ such that
for every $c \to Sd$ exists a unique $r \to d$ making this diagram commute

\[\begin{tikzcd}
& Sd & d \\
c \rar[swap]{u}\urar{g} & Sr \uar[swap,dashed]{Sf} & r \uar[dashed]{\exists! f} &.
\end{tikzcd}\]

** III.2. The Yoneda lemma
*** Universal arrows as natural bijections
The arrow $u \colon c \to Sr$ is universal iff $f \mapsto Sf \circ u$ is a bijection
$\mathrm{hom}(r,d) \cong \mathrm{hom}(c,Sd)$ natural in $d$. Any natural bijection of this
kind is determined by a unique universal arrow.

**** Proof
Bijection follows from the definition of [[*Universal arrow][universal arrow]], and
naturality follows from $S(gf)\circ u = Sg \circ Sf \circ u$.

Given a bijection $\varphi$, we define $u = \varphi(\mathrm{id}_r)$. By naturality we have
the bijection $\varphi(f) = Sf \circ u$, every arrow is written in this way.

*** Representation
A *representation* of $K \colon D \to \mathtt{Set}$ is a natural isomorphism

\[
\psi\colon \mathrm{hom}_{D}(r,-) \cong K.
\]

A functor is /representable/ if it has a representation. An object $r$ is
called a /representing object/. $D$ must have small hom-sets.

*** Representations from universal arrows
If $u \colon \ast \to Kr$ is a universal arrow for a functor $K\colon D \to \mathtt{Set}$, then
$f \mapsto K(f)(u\ast)$ is a representation. Every representation is obtained
in this way.

**** Proof
We know that $\mathrm{hom}(\ast, X) \xrightarrow{.} X$ is a natural isomorphism in $X$; in particular
$\mathrm{hom}(\ast, K-) \xrightarrow{.} K-$. Every representation is built then as

\[ \mathrm{hom}_{D}(r,-) \cong \mathrm{hom}(\ast,K-) \cong K, \]

for every natural isomorphism $D(r,-) \cong \mathtt{Set}(\ast,K-)$. But every natural
isomorphism of this kind is an [[*Universal arrows as natural bijections][universal arrow]].

*** Yoneda Lemma
For any $K\colon D \to \mathtt{Set}$ and $r \in D$, there is a bijection

\[
y \colon \mathrm{Nat}(\mathrm{hom}_{D}(r,-), K) \cong Kr
\]

sending the natural transformation $\alpha \colon \mathrm{hom}_{D}(r,-) \xrightarrow{.} K$ to the image of
the identity, $\alpha_r1_r$.

**** TODO Proof

*** Corollary to Yoneda Lemma
Given $r,s \in D$, any natural transformation $\mathrm{hom}(r,-) \xrightarrow{.} \mathrm{hom}(s,-)$ has
the form $h_{\ast}$ for a unique $h\colon s \to r$.

**** Proof
Using Yoneda Lemma, we know that

\[ \mathrm{Nat}(\mathrm{hom}_D(r,-), \mathrm{hom}_D(s,-)) \cong \mathrm{hom}_D(s,r),
\]

sending the natural transformation to a morphism $\alpha(id_r) = h \colon s \to r$. The
rest of the natural transformation is determined as $h_{\ast}$ by naturality.

*** Addendum to the Yoneda Lemma
The bijection on the [[*Yoneda Lemma][Yoneda Lemma]] is a natural isomorphism between
two $\mathtt{Set}^D \times D \to \mathtt{Set}$ functors.

*** Yoneda functor
In the conditions of [[*Yoneda Lemma][Yoneda Lemma]], the *Yoneda functor* is a full and
faithful functor $Y \colon D^{op} \to \mathtt{Set}^{D}$ defined with the arrow function

\[
\left(f \colon s \to r\right) \mapsto 
\Big(D(f,-) \colon D(r,-) \to D(s,-)\Big).
\]

**** TODO Proof
** III.3. Coproducts and colimits
*** Diagonal functor
The *diagonal functor* $\Delta \colon C \to C \times C$ is defined by $\Delta(c) = (c,c)$ on objects
and by $\Delta(f) = (f,f)$ on arrows.

*** Coproduct diagram
A *coproduct diagram* of a pair $(a,b)$ is a universal arrow from $(a,b)$ to
the diagonal functor $\Delta$. The object defining this universal arrow up to
isomorphism is called the *coproduct object* and written as $a \amalg b$.

\[\begin{tikzcd}
 & (d,d) \\
(a,b) \rar[swap]{(i_a,i_b)} \urar{(f,g)} & 
(a\amalg b, a\amalg b) \uar[swap]{(f \amalg g, f \amalg g)} & .
\end{tikzcd}\]

**** Diagram rewriting
This universal property can be rewritten as

\[\begin{tikzcd}
a \rar{i}\drar[swap]{f} & a \amalg b \dar[dashed]{\exists! h} & b \lar{j}\dlar{g} \\
& d &  & .
\end{tikzcd}\]

**** Bijection rewriting
This universal arrow is a bijection $\mathrm{hom}(a,d) \times \mathrm{hom}(b,d) \cong \mathrm{hom}(a \amalg b,d)$
natural in $d$.

*** Coproduct functor
In a category $C$ where every pair has a coproduct, the coproduct bifunctor
$\amalg \colon C \times C \to C$ is defined on arrows as the unique arrow

\[\begin{tikzcd}
a \dar[swap]{f}\rar{i} & a \amalg b \dar[dashed]{\exists! f\amalg g} & b \dar{g}\lar[swap]{j} \\
a' \rar[swap]{i'} & a' \amalg b' & b \lar{j'}
\end{tikzcd}\]

making this diagram commute.

*** Infinite coproducts
A *coproduct* of objects of $C$ indexed by a discrete category $X$ is a
universal arrow to the indexed diagonal functor $\Delta \colon C \to C^{X}$. We write
the coproduct object as $\coprod_{x \in X} a_x$.

**** Bijection rewriting
This universal arrow is a bijection

\[\mathrm{hom}\left( \coprod_{x \in X}a_x, c \right)
\cong \prod_{x \in X} \mathrm{hom}(a_x,c)
\]

natural in $c$.

*** Copowers
A *copower* is a coproduct where all the factors are equal. It is written
as 

\[\coprod_{x\in X} b \cong X \cdot b.\]

*** Coequalizers
A *coequalizer* of two arrows $f,g \colon a \to b$ is $u \colon b \to e$ such that $uf = ug$; and
for every other $u'$ with the same property factorizes through it.

*** Pushout
** III.5. Categories with finite products
*** Category with finite products
A category *has finite products* if to any finite number of objects exists
a product diagram. In particular, it has a terminal object.

*** Binary products define finite products
A category having binary products has finite products. There is then a
product bifunctor, an isomorphism

\[
\alpha \colon a \times (b \times c) \cong (a \times b) \times c
\]

natural in $a,b,c$; and isomorphisms

\[
\lambda \colon t \times a \cong a,
\qquad
\varrho\colon a \times t \cong a,
\]

both natural in $a$.

**** TODO Proof
We will prove that $a \times (b \times c)$ is a product of $a,b,c$; due to its universal
property we know it has the universal property of the product of $a,b,c$

\[\begin{tikzcd}[row sep=small]
& & b \\
a & a \times (b \times c) \rar\lar\urar\drar & b \times c \dar \uar \\
& & c
\end{tikzcd}\]

and, by the same reasoning, $(a \times b) \times c$ is also a product. They are
isomorphic due to universality.

# Why is it natural?

** III.6. Groups in categories
*** A group has a group hom functor
In a category with finite products, $c$ is a group iff $\mathrm{hom}(c,-)$ is a group
in the functor category $\mathtt{Set}^{C^{op}}$.

**** TODO Proof

** III.7. Colimits of representable functors
*** Representation as colimits
* IV. Adjoints
** IV.1. Adjunctions
*** Adjunction
An *adjunction* from categories $X$ to $A$ is a pair of functors
$F\colon X \to A$, $G\colon A \to X$ with a natural bijection

\[
\varphi \colon \mathrm{hom}(Fx,a) \cong \mathrm{hom}(x,Ga),
\] 

natural in both $x\in X$ and $a \in A$. We write it as $F \dashv G$.

*** Unit and counit
An adjunction determines a *unit* and a *counit*

 1) A natural transformation made with universal arrows $\eta\colon I \xrightarrow{.} GF$, where
    the right adjoint of each $f \colon Fx \to a$ is

    \[
    \varphi f = Gf \circ \eta_x \colon x \to Ga.
    \]

 2) A natural transformation made with universal arrows $\varepsilon \colon FG \xrightarrow{.} I$, where
    the left adjoint of each $g \colon x \to Ga$ is

    \[\varphi^{-1}g = \varepsilon \circ Fg \colon Fx \to a.\]

that follow the /triangle identities/ $\eta G \circ G \varepsilon = \mathrm{id}$ and $F\eta \circ \varepsilon F = \mathrm{id}$.

*** Characterization of adjunctions
Each adjunction is completely determined by any of

 1) functors $F,G$ and $\eta\colon 1 \xrightarrow{.} GF$ where $\eta_x\colon x \to GFx$ is universal to $G$.
 2) functor $G$ and universals $\eta_x \colon x \to GF_0 x$, creating a functor $F$.
 3) functors $F,G$ and $\varepsilon\colon FG \xrightarrow{.} 1$ where $\varepsilon_a\colon FGa \to a$ is universal from $F$.
 4) functor $F$ and universals $\varepsilon_a\colon FG_0a \to a$, creating a functor $G$.
 5) functors $F,G$, with units and counits satisfiying the triangle
    identities $\eta G \circ G \varepsilon = \mathrm{id}$ and $F\eta \circ \varepsilon F = \mathrm{id}$.

** IV.3. Reflective subcategories
** IV.4. Equivalence of categories
*** Equivalence of categories
A *equivalence of categories* is a pair of functors $S,T$ which are
inverses, $S \circ T = I$. Their domain and codomain are called /equivalent/ 
/categories/.

*** Skeleton of a category
A *skeleton* is a full subcategory where every isomorphism class has
exactly one representative.

** IV.5. Adjoints for preorders
*** Galois connections are adjoint pairs
Let $L\colon P \to Q^{op}$ and $R\colon Q^{op} \to P$ two order preserving functions. They
are adjoints iff for every two objects

\[
Lp \geq q \iff p \leq Rq.
\]

The adjunction is unique and

\[
Lp \geq LRLp \geq Lp, \qquad Rq \leq RLRq \leq Rq.
\]

** IV.6. Cartesian closed categories
*** Cartesian closed category
A *cartesian closed category* is a category with all finite products where
the functors

\[\begin{tabular}{ccc}
$C \to 1$, & 
$C \to C \times C$, & 
$C \to C$, \\
$c \mapsto 0$, &
$c \mapsto (c,c)$, &
$c \mapsto c \times b$;
\end{aligned}\]

have specified adjoints

\[\begin{tabular}{ccc}
$0 \mapsto t$, &
$(a,b) \mapsto a \times b$, &
$c \mapsto c^b$.
\end{aligned}\]

*** TODO Evaluation map

** IV.7. Transformations of adjoints
*** Map of adjunctions
Given two adjunctions $\varphi\colon F \dashv G$ and $\varphi'\colon F' \dashv G'$; we define a *map of adjunctions*
as two functors $K \colon A \to A'$ and $L \colon X \to X'$ such that

\[\begin{tikzcd}
A \dar{K}\rar{G} & X \dar{L} \\
A' \rar{G'} & X'
\end{tikzcd}
\quad
\begin{tikzcd}
X \dar{L}\rar{F} & A \dar{K} \\
X' \rar{F'} & A' &
\end{tikzcd}\]

commute and such that, knowing that $KF = F'L$ and $LG = G'K$,

\[\begin{tikzcd}
\mathrm{hom}(Fx,a) \rar{\varphi} \dar[swap]{K} & \mathrm{hom}(x,Ga) \dar{L} \\
\mathrm{hom}(F'Lx,Ka) \rar{\varphi'} & \mathrm{hom}(Lx,G'Ka)
\end{tikzcd}\]

commutes.

**** Equivalence for units and counits
Given the first property, the condition on hom-sets is equivalent
to $L\eta = \eta'L$ and $\varepsilon'K = K\varepsilon$.

***** TODO Proof

*** TODO Conjugate natural transformations

** IV.9. Subsets and characteristic functions
*** Subobject classifier
A *subobject classifier* for ${\cal C}$ with a terminal object $1$ is a monomorphism
$t \colon 1 \to \Omega$ such that for every monomorphism $m$ exists a unique square

\[\begin{tikzcd}
S\rar{} \dar[swap,hook]{m} & 1 \dar[hook]{t} \\
X\rar[dashed]{\Psi_{S}} & \Omega &,
\end{tikzcd}\]

which is at the same time a pullback.

** IV.10. Categories like sets
*** Elementary topos
An *elementary topos* is a category $E$ which

 1) has all finite limits,
 2) has a subobject classifier,
 3) is cartesian closed.

*** Presheaves
A *presheaf* is a set-valued contravariant functor on a small category.

* V. Limits
** V.1. Creation of limits
*** Small-complete category
A category is *small-complete* when all small diagrams have limits in it.

*** Completeness of Set
Given $J$ small, $F \colon J \to \mathtt{Set}$ has limit $\mathrm{Cone}(\ast,F)$; the set of all cones
$\sigma\colon \ast \to F$ with the functions $v_j\colon \sigma \mapsto \sigma_j(\ast)$.

**** TODO Proof

*** Creation of limits
The functor $V\colon A \to X$ *creates limits* for $F\colon J \to A$ when

 1) for any con $\tau\colon x \xrightarrow{.} VF$ exists $\sigma\colon a \to F$ with $Va = x$ and $V\sigma = \tau$.
 2) this $\sigma$ is a limiting cone.

*** TODO The forgetful Groups to Sets functor creates limits

** TODO V.2. Limits by products and equalizers
** TODO V.5. Adjoints on limits

* VI. Monads and algebras
** VI.1. Monads in a category
*** Monad
A *monad* is a functor $T\colon X \to X$ with natural transformations

 * $\eta\colon I \xrightarrow{.} T$, called /unit/
 * $\mu \colon T^2 \xrightarrow{.} T$, called /multiplication/

such that

\[\begin{tikzcd}
T^3 \rar{T\mu}\dar{\mu T} & T^2\dar{\mu} \\
T^2 \rar{\mu} & T
\end{tikzcd}
\qquad
\begin{tikzcd}
IT \rar{\eta T}\drar[swap]{\cong} & T^2\dar{\mu} & \lar[swap]{T\eta}\dlar{\cong} TI \\
& T & &.
\end{tikzcd}\]

*** Each adjunction defines a monad
Given $F \dashv G$, $GF$ is a monad.

**** Proof
We take the unit of the adjunction as the monad unit. We define the
product as $\mu = G\varepsilon F$. Associativity follows from these diagrams

\[\begin{tikzcd}
FGFG\rar{FG\varepsilon} \dar[swap]{\varepsilon FG} & FG \dar{\varepsilon} \\
FG\rar{\varepsilon} & I
\end{tikzcd}
\qquad
\begin{tikzcd}
GFGFGF\rar{GFG\varepsilonF} \dar[swap]{G\varepsilon FGF} & GFGF \dar{G\varepsilonF} \\
GFGF\rar{G\varepsilonF} & GF &,
\end{tikzcd}\]

where the first is commutative by the [[*Interchange law][interchange law]] and the second
is obtained by applying functors $G$ and $F$. Unit laws follow from
the [[*Unit and counit][triangular identities]] after applying $F$ and $G$.

*** Comonad
A *comonad* is a functor $L\colon X \to X$ with natural transformations

 * $\varepsilon\colon L\to I$, called /counit/
 * $\delta\colon L \to L^2$, called /comultiplication/

such that

\[\begin{tikzcd}
L\rar{\delta} \dar[swap]{\delta} & L^{2} \dar{L\delta} \\
L^{2}\rar{\delta L} & L^{3}
\end{tikzcd}
\qquad
\begin{tikzcd}
& L \dar{\delta} \dlar[swap]{\cong} \drar{\cong} & \\
IL & 
L^2 \lar{\varepsilon L}\rar[swap]{L \varepsilon} & 
LI
&.
\end{tikzcd}\]

*** TODO Each adjunction defines a comonad
** VI.2. Algebras for a monad
*** T-algebra
For a monad $T$, a $T\text{-algebra}$ is an object $x$ with an arrow $h \colon Tx \to x$ called 
/structure map/ making these diagrams commute

\[\begin{tikzcd}
T^{2}x \rar{Th}\dar[swap]{\mu} & Tx \dar{h} \\
Tx\rar{h} & x &.
\end{tikzcd}\]

*** Morphisms of T-algebras
A morphism of T-algebras is an arrow $f\colon x \to x'$ making the following square
commute

\[\begin{tikzcd}
Tx \dar[swap]{Tf}\rar{h} & Tx \dar{f} \\
Tx' \rar[swap]{h'} & Tx' &.
\end{tikzcd}\]

*** Category of T-algebras
The set of all $T\text{-algebras}$ and their morphisms form a category $X^{T}$.

**** Proof
Given $f\colon x \to x'$ and $g\colon x'\to x''$, $T\text{-algebra}$ morphisms, their composition
is also a $T\text{-algebra}$ morphism, due to the fact that this diagram

\[\begin{tikzcd}
Tx \rar{h}\dar[swap]{Tf} & 
x \dar{f}\\
Tx' \dar[swap]{Tg} \rar{h'} &
x' \dar{g}\\
Tx'' \rar{h''}&
x''
\end{tikzcd}\]

commutes.

*** Every monad is defined by its T-algebras
The monad defined by the adjunction $F^{T} \dashv G^{T}$ is $T$, where the functors
are defined as

\[F^{T}\colon \begin{tikzcd}
x \dar{f} \\
x'
\end{tikzcd} \mapsto \begin{tikzcd}
(Tx,\mu) \dar{Tf} \\
(Tx',\mu)
\end{tikzcd}
\qquad
G^{T}\colon  \begin{tikzcd}
(x,h) \dar{f} \\
(x',h')
\end{tikzcd} \mapsto
\begin{tikzcd}
x \dar{Tf} \\
x' &
\end{tikzcd}\]

knowing that $(Tx,\mu)$ is always a $T\text{-algebra}$.

**** TODO Proof

** VI.3. The comparison with algebras
*** Comparison of adjunctions with algebras
Given $F \dashv G$ with the monad $T$, there is a unique $K\colon A \to X^T$ with
$G^TK = G$ and $KF = F^T$.

**** TODO Proof

** TODO VI.4. Words and free semigroups
** TODO VI.5. Free algebras for a monad
* VII. Monoids
* IX. Special limits
** IX.1. Filtered limits
*** Directed preorder
A preorder $P$ is *directed* when any two elements have an upper bound.

*** Filtered category
A category ${\cal C}$ is *filtered* when

 1) for any $a,b \in {\cal C}$ there exists a $c$ with arrows $a \to c$, $b \to c$.
 2) for any $u,v \colon a \to b$ exists a $w\colon b \to c$ such that $wu=wv$.

In a filtered category, every finite diagram is base of at least one cone.

